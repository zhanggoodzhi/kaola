/*
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
*/
'use strict';(function(angular,factory){if(typeof define==="function"&&define.amd)define(["angular"],function(angular){return factory(angular)});else return factory(angular)})(window.angular||null,function(angular){(function(){angular.module("ngTable",[])})();(function(){angular.module("ngTable").value("ngTableDefaults",{params:{},settings:{}})})();(function(){angular.module("ngTable").factory("ngTableEventsChannel",ngTableEventsChannel);ngTableEventsChannel.$inject=["$rootScope"];function ngTableEventsChannel($rootScope){var events={};events=addChangeEvent("afterCreated",events);events=addChangeEvent("afterReloadData",events);events=addChangeEvent("datasetChanged",events);events=addChangeEvent("pagesChanged",events);return events;function addChangeEvent(eventName,target){var fnName=eventName.charAt(0).toUpperCase()+eventName.substring(1);var event={};event["on"+fnName]=createEventSubscriptionFn(eventName);event["publish"+fnName]=createPublishEventFn(eventName);return angular.extend(target,event)}function createEventSubscriptionFn(eventName){return function subscription(handler){var eventSelector=angular.identity;var scope=$rootScope;if(arguments.length===2)if(angular.isFunction(arguments[1].$new))scope=arguments[1];else eventSelector=arguments[1];else if(arguments.length>2){scope=arguments[1];eventSelector=arguments[2]}if(angular.isObject(eventSelector)){var requiredPublisher=eventSelector;eventSelector=function(publisher){return publisher===requiredPublisher}}return scope.$on("ngTable:"+eventName,function(event,params){if(params.isNullInstance)return;var eventArgs=rest(arguments,2);var fnArgs=[params].concat(eventArgs);if(eventSelector.apply(this,fnArgs))handler.apply(this,fnArgs)})}}function createPublishEventFn(eventName){return function publish(){var fnArgs=["ngTable:"+eventName].concat(Array.prototype.slice.call(arguments));$rootScope.$broadcast.apply($rootScope,fnArgs)}}function rest(array,n){return Array.prototype.slice.call(array,n==null?1:n)}}})();(function(){angular.module("ngTable").provider("ngTableFilterConfig",ngTableFilterConfigProvider);ngTableFilterConfigProvider.$inject=[];function ngTableFilterConfigProvider(){var config;var defaultConfig={defaultBaseUrl:"ng-table/filters/",defaultExt:".html",aliasUrls:{}};this.$get=ngTableFilterConfig;this.resetConfigs=resetConfigs;this.setConfig=setConfig;init();function init(){resetConfigs()}function resetConfigs(){config=defaultConfig}function setConfig(customConfig){var mergeConfig=angular.extend({},config,customConfig);mergeConfig.aliasUrls=angular.extend({},config.aliasUrls,customConfig.aliasUrls);config=mergeConfig}ngTableFilterConfig.$inject=[];function ngTableFilterConfig(){var publicConfig;var service={config:publicConfig,getTemplateUrl:getTemplateUrl,getUrlForAlias:getUrlForAlias};Object.defineProperty(service,"config",{get:function(){return publicConfig=publicConfig||angular.copy(config)},enumerable:true});return service;function getTemplateUrl(filterDef,filterKey){if(angular.isObject(filterDef))filterDef=filterDef.id;if(filterDef.indexOf("/")!==-1)return filterDef;return service.getUrlForAlias(filterDef,filterKey)}function getUrlForAlias(aliasName){return config.aliasUrls[aliasName]||config.defaultBaseUrl+aliasName+config.defaultExt}}}})();(function(){angular.module("ngTable").provider("ngTableDefaultGetData",ngTableDefaultGetDataProvider);ngTableDefaultGetDataProvider.$inject=[];function ngTableDefaultGetDataProvider(){var provider=this;provider.$get=ngTableDefaultGetData;provider.filterFilterName="filter";provider.sortingFilterName="orderBy";ngTableDefaultGetData.$inject=["$filter"];function ngTableDefaultGetData($filter){var defaultDataOptions={applyFilter:true,applySort:true,applyPaging:true};getData.applyPaging=applyPaging;getData.getFilterFn=getFilterFn;getData.getOrderByFn=getOrderByFn;return getData;function getFilterFn(params){var filterOptions=params.settings().filterOptions;if(angular.isFunction(filterOptions.filterFn))return filterOptions.filterFn;else return $filter(filterOptions.filterFilterName||provider.filterFilterName)}function getOrderByFn(){return $filter(provider.sortingFilterName)}function applyFilter(data,params){if(!params.hasFilter())return data;var filter=params.filter(true);var filterKeys=Object.keys(filter);var parsedFilter=filterKeys.reduce(function(result,key){result=setPath(result,filter[key],key);return result},{});var filterFn=getFilterFn(params);return filterFn.call(params,data,parsedFilter,params.settings().filterOptions.filterComparator)}function applyPaging(data,params){var pagedData=data.slice((params.page()-1)*params.count(),params.page()*params.count());params.total(data.length);return pagedData}function applySort(data,params){var orderBy=params.orderBy();var orderByFn=getOrderByFn(params);return orderBy.length?orderByFn(data,orderBy):data}function getData(data,params){if(data==null)return[];var options=angular.extend({},defaultDataOptions,params.settings().dataOptions);var fData=options.applyFilter?applyFilter(data,params):data;var orderedData=options.applySort?applySort(fData,params):fData;return options.applyPaging?applyPaging(orderedData,params):orderedData}function setPath(obj,value,path){var keys=path.split(".");var ret=obj;var lastKey=keys[keys.length-1];var target=ret;var parentPathKeys=keys.slice(0,keys.length-1);parentPathKeys.forEach(function(key){if(!target.hasOwnProperty(key))target[key]={};target=target[key]});target[lastKey]=value;return ret}}}})();(function(){angular.module("ngTable").factory("ngTableColumn",[function(){return{buildColumn:buildColumn};function buildColumn(column,defaultScope,columns){var extendedCol=Object.create(column);var defaults=createDefaults();for(var prop in defaults){if(extendedCol[prop]===undefined)extendedCol[prop]=defaults[prop];if(!angular.isFunction(extendedCol[prop]))(function(prop1){var getterSetter=function getterSetter(){if(arguments.length===1&&!isScopeLike(arguments[0]))getterSetter.assign(null,arguments[0]);else return column[prop1]};getterSetter.assign=function($scope,value){column[prop1]=value};extendedCol[prop1]=getterSetter})(prop);(function(prop1){var getterFn=extendedCol[prop1];extendedCol[prop1]=function(){if(arguments.length===1&&!isScopeLike(arguments[0]))getterFn.assign(null,arguments[0]);else{var scope=arguments[0]||defaultScope;var context=Object.create(scope);angular.extend(context,{$column:extendedCol,$columns:columns});return getterFn.call(column,context)}};if(getterFn.assign)extendedCol[prop1].assign=getterFn.assign})(prop)}return extendedCol}function createDefaults(){return{"class":createGetterSetter(""),filter:createGetterSetter(false),groupable:createGetterSetter(false),filterData:angular.noop,headerTemplateURL:createGetterSetter(false),headerTitle:createGetterSetter(""),sortable:createGetterSetter(false),show:createGetterSetter(true),title:createGetterSetter(""),titleAlt:createGetterSetter("")}}function createGetterSetter(initialValue){var value=initialValue;var getterSetter=function getterSetter(){if(arguments.length===1&&!isScopeLike(arguments[0]))getterSetter.assign(null,arguments[0]);else return value};getterSetter.assign=function($scope,newValue){value=newValue};return getterSetter}function isScopeLike(object){return object!=null&&angular.isFunction(object.$new)}}])})();(function(){angular.module("ngTable").factory("NgTableParams",["$q","$log","$filter","ngTableDefaults","ngTableDefaultGetData","ngTableEventsChannel",function($q,$log,$filter,ngTableDefaults,ngTableDefaultGetData,ngTableEventsChannel){var isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};var NgTableParams=function(baseParameters,baseSettings){if(typeof baseParameters==="boolean")this.isNullInstance=true;var self=this,prevParamsMemento,errParamsMemento,isCommittedDataset=false,initialEvents=[],log=function(){if(settings.debugMode&&$log.debug)$log.debug.apply($log,arguments)},defaultFilterOptions={filterComparator:undefined,filterDelay:500,filterDelayThreshold:1E4,filterFilterName:undefined,filterFn:undefined,filterLayout:"stack"},defaultGroupOptions={defaultSort:"asc",isExpanded:true},defaultSettingsFns=getDefaultSettingFns();this.data=[];this.parameters=function(newParameters,parseParamsFromUrl){parseParamsFromUrl=parseParamsFromUrl||false;if(angular.isDefined(newParameters)){for(var key in newParameters){var value=newParameters[key];if(parseParamsFromUrl&&key.indexOf("[")>=0){var keys=key.split(/\[(.*)\]/).reverse();var lastKey="";for(var i=0,len=keys.length;i<len;i++){var name=keys[i];if(name!==""){var v=value;value={};value[lastKey=name]=isNumber(v)?parseFloat(v):v}}if(lastKey==="sorting")params[lastKey]={};params[lastKey]=angular.extend(params[lastKey]||{},value[lastKey])}else if(key==="group")params[key]=parseGroup(newParameters[key]);else params[key]=isNumber(newParameters[key])?parseFloat(newParameters[key]):newParameters[key]}log("ngTable: set parameters",params);return this}return params};function parseGroup(group){var defaultSort=settings.groupOptions&&settings.groupOptions.defaultSort;if(angular.isFunction(group)){if(group.sortDirection==null)group.sortDirection=defaultSort;return group}else if(angular.isString(group)){var grp={};grp[group]=defaultSort;return grp}else if(angular.isObject(group)){for(var key in group)if(group[key]==null)group[key]=defaultSort;return group}else return group}this.settings=function(newSettings){if(angular.isDefined(newSettings)){if(newSettings.filterOptions)newSettings.filterOptions=angular.extend({},settings.filterOptions,newSettings.filterOptions);if(newSettings.groupOptions)newSettings.groupOptions=angular.extend({},settings.groupOptions,newSettings.groupOptions);if(angular.isArray(newSettings.dataset))newSettings.total=newSettings.dataset.length;var originalDataset=settings.dataset;settings=angular.extend(settings,newSettings);if(angular.isArray(newSettings.dataset))optimizeFilterDelay();var hasDatasetChanged=newSettings.hasOwnProperty("dataset")&&newSettings.dataset!=originalDataset;if(hasDatasetChanged){if(isCommittedDataset)this.page(1);isCommittedDataset=false;var fireEvent=function(){ngTableEventsChannel.publishDatasetChanged(self,newSettings.dataset,originalDataset)};if(initialEvents)initialEvents.push(fireEvent);else fireEvent()}log("ngTable: set settings",settings);return this}return settings};this.page=function(page){return angular.isDefined(page)?this.parameters({"page":page}):params.page};this.total=function(total){return angular.isDefined(total)?this.settings({"total":total}):settings.total};this.count=function(count){return angular.isDefined(count)?this.parameters({"count":count,"page":1}):params.count};this.filter=function(filter){if(angular.isDefined(filter)&&angular.isObject(filter))return this.parameters({"filter":filter,"page":1});else if(filter===true){var keys=Object.keys(params.filter);var significantFilter={};for(var i=0;i<keys.length;i++){var filterValue=params.filter[keys[i]];if(filterValue!=null&&filterValue!=="")significantFilter[keys[i]]=filterValue}return significantFilter}else return params.filter};this.group=function(group,sortDirection){if(!angular.isDefined(group))return params.group;var newParameters={page:1};if(angular.isFunction(group)&&angular.isDefined(sortDirection)){group.sortDirection=sortDirection;newParameters.group=group}else if(angular.isDefined(group)&&angular.isDefined(sortDirection)){var groupArray={};groupArray[group]=sortDirection;newParameters.group=groupArray}else newParameters.group=group;this.parameters(newParameters);return this};this.sorting=function(sorting){if(arguments.length==2){var sortArray={};sortArray[sorting]=arguments[1];this.parameters({"sorting":sortArray});return this}return angular.isDefined(sorting)?this.parameters({"sorting":sorting}):params.sorting};this.isSortBy=function(field,direction){if(direction!==undefined)return angular.isDefined(params.sorting[field])&&params.sorting[field]==direction;else return angular.isDefined(params.sorting[field])};this.orderBy=function(){return convertSortToOrderBy(params.sorting)};function convertSortToOrderBy(sorting){var result=[];for(var column in sorting)result.push((sorting[column]==="asc"?"+":"-")+column);return result}this.generatePagesArray=function(currentPage,totalItems,pageSize,maxBlocks){if(!arguments.length){currentPage=this.page();totalItems=this.total();pageSize=this.count()}var maxPage,maxPivotPages,minPage,numPages,pages;maxBlocks=maxBlocks&&maxBlocks<6?6:maxBlocks;pages=[];numPages=Math.ceil(totalItems/pageSize);if(currentPage>numPages){currentPage=numPages;this.page(currentPage)}if(numPages>1){pages.push({type:"prev",number:Math.max(1,currentPage-1),active:currentPage>1});pages.push({type:"first",number:1,active:currentPage>1,current:currentPage===1});maxPivotPages=Math.round((settings.paginationMaxBlocks-settings.paginationMinBlocks)/2);minPage=Math.max(2,currentPage-maxPivotPages);maxPage=Math.min(numPages-1,currentPage+maxPivotPages*2-(currentPage-minPage));minPage=Math.max(2,minPage-(maxPivotPages*2-(maxPage-minPage)));var i=minPage;while(i<=maxPage){if(i===minPage&&i!==2||i===maxPage&&i!==numPages-1)pages.push({type:"more",active:false});else pages.push({type:"page",number:i,active:currentPage!==i,current:currentPage===i});i++}pages.push({type:"last",number:numPages,active:currentPage!==numPages,current:currentPage===numPages});pages.push({type:"next",number:Math.min(numPages,currentPage+1),active:currentPage<numPages})}return pages};this.isDataReloadRequired=function(){return!isCommittedDataset||!angular.equals(createComparableParams(),prevParamsMemento)||hasGlobalSearchFieldChanges()};function createComparableParams(){var result={params:params};if(angular.isFunction(params.group))result.groupSortDirection=params.group.sortDirection;return result}this.hasFilter=function(){return Object.keys(this.filter(true)).length>0};this.hasGroup=function(group,sortDirection){if(group==null)return angular.isFunction(params.group)||Object.keys(params.group).length>0;if(angular.isFunction(group))if(sortDirection==null)return params.group===group;else return params.group===group&&group.sortDirection===sortDirection;else if(sortDirection==null)return Object.keys(params.group).indexOf(group)!==-1;else return params.group[group]===sortDirection};this.hasFilterChanges=function(){var previousFilter=prevParamsMemento&&prevParamsMemento.params.filter;return!angular.equals(params.filter,previousFilter)||hasGlobalSearchFieldChanges()};function hasGlobalSearchFieldChanges(){var currentVal=params.filter&&params.filter.$;var previousVal=prevParamsMemento&&prevParamsMemento.params.filter&&prevParamsMemento.params.filter.$;return!angular.equals(currentVal,previousVal)}this.url=function(asString){asString=asString||false;var pairs=asString?[]:{};for(var key in params)if(params.hasOwnProperty(key)){var item=params[key],name=encodeURIComponent(key);if(typeof item==="object")for(var subkey in item){if(isSignificantValue(item[subkey],key)){var pname=name+"["+encodeURIComponent(subkey)+"]";collectValue(item[subkey],pname)}}else if(!angular.isFunction(item)&&isSignificantValue(item,key))collectValue(item,name)}return pairs;function collectValue(value,key){if(asString)pairs.push(key+"\x3d"+encodeURIComponent(value));else pairs[key]=encodeURIComponent(value)}function isSignificantValue(value,key){return key==="group"?true:angular.isDefined(value)&&value!==""}};this.reload=function(){var self=this,pData=null;settings.$loading=true;prevParamsMemento=angular.copy(createComparableParams());isCommittedDataset=true;if(self.hasGroup())pData=runInterceptorPipeline($q.when(settings.getGroups(self)));else pData=runInterceptorPipeline($q.when(settings.getData(self)));log("ngTable: reload data");var oldData=self.data;return pData.then(function(data){settings.$loading=false;errParamsMemento=null;self.data=data;ngTableEventsChannel.publishAfterReloadData(self,data,oldData);self.reloadPages();return data},function(reason){errParamsMemento=prevParamsMemento;return $q.reject(reason)})};this.hasErrorState=function(){return!!(errParamsMemento&&angular.equals(errParamsMemento,createComparableParams()))};function optimizeFilterDelay(){if(settings.filterOptions.filterDelay===defaultFilterOptions.filterDelay&&settings.total<=settings.filterOptions.filterDelayThreshold&&settings.getData===defaultSettingsFns.getData)settings.filterOptions.filterDelay=0}this.reloadPages=function(){var currentPages;return function(){var oldPages=currentPages;var newPages=self.generatePagesArray(self.page(),self.total(),self.count());if(!angular.equals(oldPages,newPages)){currentPages=newPages;ngTableEventsChannel.publishPagesChanged(this,newPages,oldPages)}}}();function runInterceptorPipeline(fetchedData){var interceptors=settings.interceptors||[];return interceptors.reduce(function(result,interceptor){var thenFn=interceptor.response&&interceptor.response.bind(interceptor)||$q.when;var rejectFn=interceptor.responseError&&interceptor.responseError.bind(interceptor)||$q.reject;return result.then(function(data){return thenFn(data,self)},function(reason){return rejectFn(reason,self)})},fetchedData)}function getDefaultSettingFns(){return{getData:getData,getGroups:getGroups};function getData(params){return ngTableDefaultGetData(params.settings().dataset,params)}function getGroups(params){var group=params.group();var groupFn;var sortDirection=undefined;if(angular.isFunction(group)){groupFn=group;sortDirection=group.sortDirection}else{var groupField=Object.keys(group)[0];sortDirection=group[groupField];groupFn=function(item){return getPath(item,groupField)}}var settings=params.settings();var originalDataOptions=settings.dataOptions;settings.dataOptions={applyPaging:false};var gotData=$q.when(settings.getData(params));return gotData.then(function(data){var groups={};angular.forEach(data,function(item){var groupName=groupFn(item);groups[groupName]=groups[groupName]||{data:[],$hideRows:!settings.groupOptions.isExpanded,value:groupName};groups[groupName].data.push(item)});var result=[];for(var i in groups)result.push(groups[i]);if(sortDirection){var orderByFn=ngTableDefaultGetData.getOrderByFn();var orderBy=convertSortToOrderBy({value:sortDirection});result=orderByFn(result,orderBy)}return ngTableDefaultGetData.applyPaging(result,params)},function(){settings.dataOptions=originalDataOptions})}function getPath(obj,ks){if(typeof ks=="string")ks=ks.split(".");if(obj===undefined)return void 0;if(ks.length===0)return obj;if(obj===null)return void 0;return getPath(obj[ks[0]],ks.slice(1))}}var params={page:1,count:10,filter:{},sorting:{},group:{}};angular.extend(params,ngTableDefaults.params);var settings={$loading:false,dataset:null,total:0,defaultSort:"desc",filterOptions:angular.copy(defaultFilterOptions),groupOptions:angular.copy(defaultGroupOptions),counts:[10,25,50,100],interceptors:[],paginationMaxBlocks:11,paginationMinBlocks:5,sortingIndicator:"span"};this.settings(defaultSettingsFns);this.settings(ngTableDefaults.settings);this.settings(baseSettings);this.parameters(baseParameters,true);ngTableEventsChannel.publishAfterCreated(this);angular.forEach(initialEvents,function(event){event()});initialEvents=null;return this};return NgTableParams}])})();(function(){angular.module("ngTable").controller("ngTableController",["$scope","NgTableParams","$timeout","$parse","$compile","$attrs","$element","ngTableColumn","ngTableEventsChannel",function($scope,NgTableParams,$timeout,$parse,$compile,$attrs,$element,ngTableColumn,ngTableEventsChannel){var isFirstTimeLoad=true;$scope.$filterRow={};$scope.$loading=false;if(!$scope.hasOwnProperty("params"))$scope.params=new NgTableParams(true);$scope.params.settings().$scope=$scope;var delayFilter=function(){var timer=0;return function(callback,ms){$timeout.cancel(timer);timer=$timeout(callback,ms)}}();function onDataReloadStatusChange(newStatus){if(!newStatus||$scope.params.hasErrorState())return;$scope.params.settings().$scope=$scope;var currentParams=$scope.params;var filterOptions=currentParams.settings().filterOptions;if(currentParams.hasFilterChanges()){var applyFilter=function(){currentParams.page(1);currentParams.reload()};if(filterOptions.filterDelay)delayFilter(applyFilter,filterOptions.filterDelay);else applyFilter()}else currentParams.reload()}$scope.$watch("params",function(newParams,oldParams){if(newParams===oldParams||!newParams)return;newParams.reload()},false);$scope.$watch("params.isDataReloadRequired()",onDataReloadStatusChange);this.compileDirectiveTemplates=function(){if(!$element.hasClass("ng-table")){$scope.templates={header:$attrs.templateHeader?$attrs.templateHeader:"ng-table/header.html",pagination:$attrs.templatePagination?$attrs.templatePagination:"ng-table/pager.html"};$element.addClass("ng-table");var headerTemplate=null;var theadFound=false;angular.forEach($element.children(),function(e){if(e.tagName==="THEAD")theadFound=true});if(!theadFound){headerTemplate=angular.element(document.createElement("thead")).attr("ng-include","templates.header");$element.prepend(headerTemplate)}var paginationTemplate=angular.element(document.createElement("div")).attr({"ng-table-pagination":"params","template-url":"templates.pagination"});$element.after(paginationTemplate);if(headerTemplate)$compile(headerTemplate)($scope);$compile(paginationTemplate)($scope)}};this.loadFilterData=function($columns){angular.forEach($columns,function($column){var result;result=$column.filterData($scope);if(!result){delete $column.filterData;return}if(angular.isObject(result)&&(angular.isObject(result.promise)||angular.isFunction(result.then))){var pData=angular.isFunction(result.then)?result:result.promise;delete $column.filterData;return pData.then(function(data){if(!angular.isArray(data)&&!angular.isFunction(data)&&!angular.isObject(data))data=[];$column.data=data})}else return $column.data=result})};this.buildColumns=function(columns){var result=[];(columns||[]).forEach(function(col){result.push(ngTableColumn.buildColumn(col,$scope,result))});return result};this.parseNgTableDynamicExpr=function(attr){if(!attr||attr.indexOf(" with ")>-1){var parts=attr.split(/\s+with\s+/);return{tableParams:parts[0],columns:parts[1]}}else throw new Error("Parse error (expected example: ng-table-dynamic\x3d'tableParams with cols')");};this.setupBindingsToInternalScope=function(tableParamsExpr){var tableParamsGetter=$parse(tableParamsExpr);$scope.$watch(tableParamsGetter,function(params){if(angular.isUndefined(params))return;$scope.paramsModel=tableParamsGetter;$scope.params=params},false);setupFilterRowBindingsToInternalScope();setupGroupRowBindingsToInternalScope()};function setupFilterRowBindingsToInternalScope(){if($attrs==undefined)$scope.show_filter=false;else if($attrs.showFilter)$scope.$parent.$watch($attrs.showFilter,function(value){$scope.show_filter=value});else $scope.$watch(hasVisibleFilterColumn,function(value){$scope.show_filter=value});if($attrs.disableFilter)$scope.$parent.$watch($attrs.disableFilter,function(value){$scope.$filterRow.disabled=value})}function setupGroupRowBindingsToInternalScope(){$scope.$groupRow={};if($attrs.showGroup){var showGroupGetter=$parse($attrs.showGroup);$scope.$parent.$watch(showGroupGetter,function(value){$scope.$groupRow.show=value});if(showGroupGetter.assign)$scope.$watch("$groupRow.show",function(value){showGroupGetter.assign($scope.$parent,value)})}else $scope.$watch("params.hasGroup()",function(newValue){$scope.$groupRow.show=newValue})}function getVisibleColumns(){return($scope.$columns||[]).filter(function(c){return c.show($scope)})}function hasVisibleFilterColumn(){if(!$scope.$columns)return false;return some($scope.$columns,function($column){return $column.show($scope)&&$column.filter($scope)})}function some(array,predicate){var found=false;for(var i=0;i<array.length;i++){var obj=array[i];if(predicate(obj)){found=true;break}}return found}function commonInit(){ngTableEventsChannel.onAfterReloadData(bindDataToScope,$scope,isMyPublisher);ngTableEventsChannel.onPagesChanged(bindPagesToScope,$scope,isMyPublisher);function bindDataToScope(params,newDatapage){var visibleColumns=getVisibleColumns();if(params.hasGroup()){$scope.$groups=newDatapage||[];$scope.$groups.visibleColumnCount=visibleColumns.length}else{$scope.$data=newDatapage||[];$scope.$data.visibleColumnCount=visibleColumns.length}}function bindPagesToScope(params,newPages){$scope.pages=newPages}function isMyPublisher(publisher){return $scope.params===publisher}}commonInit()}])})();(function(){angular.module("ngTable").directive("ngTable",["$q","$parse",function($q,$parse){return{restrict:"A",priority:1001,scope:true,controller:"ngTableController",compile:function(element){var columns=[],i=0,dataRow,groupRow,rows=[];angular.forEach(element.find("tr"),function(tr){rows.push(angular.element(tr))});dataRow=rows.filter(function(tr){return!tr.hasClass("ng-table-group")})[0];groupRow=rows.filter(function(tr){return tr.hasClass("ng-table-group")})[0];if(!dataRow)return;angular.forEach(dataRow.find("td"),function(item){var el=angular.element(item);if(el.attr("ignore-cell")&&"true"===el.attr("ignore-cell"))return;var getAttrValue=function(attr){return el.attr("x-data-"+attr)||el.attr("data-"+attr)||el.attr(attr)};var setAttrValue=function(attr,value){if(el.attr("x-data-"+attr))el.attr("x-data-"+attr,value);else if(el.attr("data"+attr))el.attr("data"+attr,value);else el.attr(attr,value)};var parsedAttribute=function(attr){var expr=getAttrValue(attr);if(!expr)return undefined;var localValue;var getter=function(context){if(localValue!==undefined)return localValue;return $parse(expr)(context)};getter.assign=function($scope,value){var parsedExpr=$parse(expr);if(parsedExpr.assign)parsedExpr.assign($scope.$parent,value);else localValue=value};return getter};var titleExpr=getAttrValue("title-alt")||getAttrValue("title");if(titleExpr)el.attr("data-title-text","{{"+titleExpr+"}}");columns.push({id:i++,title:parsedAttribute("title"),titleAlt:parsedAttribute("title-alt"),headerTitle:parsedAttribute("header-title"),sortable:parsedAttribute("sortable"),"class":parsedAttribute("header-class"),filter:parsedAttribute("filter"),groupable:parsedAttribute("groupable"),headerTemplateURL:parsedAttribute("header"),filterData:parsedAttribute("filter-data"),show:el.attr("ng-if")?parsedAttribute("ng-if"):undefined});if(groupRow||el.attr("ng-if"))setAttrValue("ng-if","$columns["+(columns.length-1)+"].show(this)")});return function(scope,element,attrs,controller){scope.$columns=columns=controller.buildColumns(columns);controller.setupBindingsToInternalScope(attrs.ngTable);controller.loadFilterData(columns);controller.compileDirectiveTemplates()}}}}])})();(function(){angular.module("ngTable").directive("ngTableDynamic",[function(){return{restrict:"A",priority:1001,scope:true,controller:"ngTableController",compile:function(tElement){var row;angular.forEach(tElement.find("tr"),function(tr){tr=angular.element(tr);if(!tr.hasClass("ng-table-group")&&!row)row=tr});if(!row)return;angular.forEach(row.find("td"),function(item){var el=angular.element(item);var getAttrValue=function(attr){return el.attr("x-data-"+attr)||el.attr("data-"+attr)||el.attr(attr)};var titleExpr=getAttrValue("title");if(!titleExpr)el.attr("data-title-text","{{$columns[$index].titleAlt(this) || $columns[$index].title(this)}}");var showExpr=el.attr("ng-if");if(!showExpr)el.attr("ng-if","$columns[$index].show(this)")});return function(scope,element,attrs,controller){var expr=controller.parseNgTableDynamicExpr(attrs.ngTableDynamic);controller.setupBindingsToInternalScope(expr.tableParams);controller.compileDirectiveTemplates();scope.$watchCollection(expr.columns,function(newCols){scope.$columns=controller.buildColumns(newCols);controller.loadFilterData(scope.$columns)})}}}}])})();(function(){angular.module("ngTable").directive("ngTableColumnsBinding",ngTableColumnsBinding);ngTableColumnsBinding.$inject=["$parse"];function ngTableColumnsBinding($parse){var directive={restrict:"A",require:"ngTable",link:linkFn};return directive;function linkFn($scope,$element,$attrs){var setter=$parse($attrs.ngTableColumnsBinding).assign;if(setter)$scope.$watch("$columns",function(newColumns){var shallowClone=(newColumns||[]).slice(0);setter($scope,shallowClone)})}}})();(function(){angular.module("ngTable").directive("ngTablePagination",["$compile","ngTableEventsChannel",function($compile,ngTableEventsChannel){return{restrict:"A",scope:{"params":"\x3dngTablePagination","templateUrl":"\x3d"},replace:false,link:function(scope,element){ngTableEventsChannel.onAfterReloadData(function(pubParams){scope.pages=pubParams.generatePagesArray()},scope,function(pubParams){return pubParams===scope.params});scope.$watch("templateUrl",function(templateUrl){if(angular.isUndefined(templateUrl))return;var template=angular.element(document.createElement("div"));template.attr({"ng-include":"templateUrl"});element.append(template);$compile(template)(scope)})}}}])})();(function(){angular.module("ngTable").controller("ngTableFilterRowController",ngTableFilterRowController);ngTableFilterRowController.$inject=["$scope","ngTableFilterConfig"];function ngTableFilterRowController($scope,ngTableFilterConfig){$scope.config=ngTableFilterConfig;$scope.getFilterCellCss=function(filter,layout){if(layout!=="horizontal")return"s12";var size=Object.keys(filter).length;var width=parseInt(12/size,10);return"s"+width};$scope.getFilterPlaceholderValue=function(filterValue){if(angular.isObject(filterValue))return filterValue.placeholder;else return""}}})();(function(){angular.module("ngTable").directive("ngTableFilterRow",ngTableFilterRow);ngTableFilterRow.$inject=[];function ngTableFilterRow(){var directive={restrict:"E",replace:true,templateUrl:"ng-table/filterRow.html",scope:true,controller:"ngTableFilterRowController"};return directive}})();(function(){angular.module("ngTable").controller("ngTableGroupRowController",ngTableGroupRowController);ngTableGroupRowController.$inject=["$scope"];function ngTableGroupRowController($scope){var groupFns=[];init();function init(){$scope.getGroupables=getGroupables;$scope.getGroupTitle=getGroupTitle;$scope.getVisibleColumns=getVisibleColumns;$scope.groupBy=groupBy;$scope.isSelectedGroup=isSelectedGroup;$scope.toggleDetail=toggleDetail;$scope.$watch("params.group()",setGroup,true)}function changeSortDirection(){var newDirection;if($scope.params.hasGroup($scope.$selGroup,"asc"))newDirection="desc";else if($scope.params.hasGroup($scope.$selGroup,"desc"))newDirection="";else newDirection="asc";$scope.params.group($scope.$selGroup,newDirection)}function findGroupColumn(groupKey){return $scope.$columns.filter(function($column){return $column.groupable($scope)===groupKey})[0]}function getGroupTitle(group){return angular.isFunction(group)?group.title:group.title($scope)}function getGroupables(){var groupableCols=$scope.$columns.filter(function($column){return $column.groupable($scope)});return groupFns.concat(groupableCols)}function getVisibleColumns(){return $scope.$columns.filter(function($column){return $column.show($scope)})}function groupBy(group){if(isSelectedGroup(group))changeSortDirection();else if(group.groupable)$scope.params.group(group.groupable($scope));else $scope.params.group(group)}function isSelectedGroup(group){if(group.groupable)return group.groupable($scope)===$scope.$selGroup;else return group===$scope.$selGroup}function setGroup(group){var existingGroupCol=findGroupColumn($scope.$selGroup);if(existingGroupCol&&existingGroupCol.show.assign)existingGroupCol.show.assign($scope,true);if(angular.isFunction(group)){groupFns=[group];$scope.$selGroup=group;$scope.$selGroupTitle=group.title}else{var groupKey=Object.keys(group||{})[0];var groupedColumn=findGroupColumn(groupKey);if(groupedColumn){$scope.$selGroupTitle=groupedColumn.title($scope);$scope.$selGroup=groupKey;if(groupedColumn.show.assign)groupedColumn.show.assign($scope,false)}}}function toggleDetail(){$scope.params.settings().groupOptions.isExpanded=!$scope.params.settings().groupOptions.isExpanded;return $scope.params.reload()}}})();(function(){angular.module("ngTable").directive("ngTableGroupRow",ngTableGroupRow);ngTableGroupRow.$inject=[];function ngTableGroupRow(){var directive={restrict:"E",replace:true,templateUrl:"ng-table/groupRow.html",scope:true,controller:"ngTableGroupRowController",controllerAs:"dctrl"};return directive}})();(function(){angular.module("ngTable").controller("ngTableSorterRowController",ngTableSorterRowController);ngTableSorterRowController.$inject=["$scope"];function ngTableSorterRowController($scope){$scope.sortBy=sortBy;function sortBy($column,event){var parsedSortable=$column.sortable&&$column.sortable();if(!parsedSortable)return;var defaultSort=$scope.params.settings().defaultSort;var inverseSort=defaultSort==="asc"?"desc":"asc";var sorting=$scope.params.sorting()&&$scope.params.sorting()[parsedSortable]&&$scope.params.sorting()[parsedSortable]===defaultSort;var sortingParams=event.ctrlKey||event.metaKey?$scope.params.sorting():{};sortingParams[parsedSortable]=sorting?inverseSort:defaultSort;$scope.params.parameters({sorting:sortingParams})}}})();(function(){angular.module("ngTable").directive("ngTableSorterRow",ngTableSorterRow);ngTableSorterRow.$inject=[];function ngTableSorterRow(){var directive={restrict:"E",replace:true,templateUrl:"ng-table/sorterRow.html",scope:true,controller:"ngTableSorterRowController"};return directive}})();(function(){angular.module("ngTable").directive("ngTableSelectFilterDs",ngTableSelectFilterDs);ngTableSelectFilterDs.$inject=[];function ngTableSelectFilterDs(){var directive={restrict:"A",controller:ngTableSelectFilterDsController};return directive}ngTableSelectFilterDsController.$inject=["$scope","$parse","$attrs","$q"];function ngTableSelectFilterDsController($scope,$parse,$attrs,$q){var $column={};init();function init(){$column=$parse($attrs.ngTableSelectFilterDs)($scope);$scope.$watch(function(){return $column.data},bindDataSource)}function bindDataSource(){getSelectListData($column).then(function(data){if(data&&!hasEmptyOption(data))data.unshift({id:"",title:""});data=data||[];$scope.$selectData=data})}function hasEmptyOption(data){var isMatch;for(var i=0;i<data.length;i++){var item=data[i];if(item&&item.id===""){isMatch=true;break}}return isMatch}function getSelectListData($column){var data=angular.isFunction($column.data)?$column.data():$column.data;return $q.when(data)}}})();angular.module("ngTable").run(["$templateCache",function($templateCache){$templateCache.put("ng-table/filterRow.html",'\x3ctr ng-show\x3d"show_filter" class\x3d"ng-table-filters"\x3e \x3cth data-title-text\x3d"{{$column.titleAlt(this) || $column.title(this)}}" ng-repeat\x3d"$column in $columns" ng-if\x3d"$column.show(this)" class\x3d"filter {{$column.class(this)}}" ng-class\x3d"params.settings().filterOptions.filterLayout\x3d\x3d\x3d\'horizontal\' ? \'filter-horizontal\' : \'\'"\x3e \x3cdiv ng-repeat\x3d"(name, filter) in $column.filter(this)" ng-include\x3d"config.getTemplateUrl(filter)" class\x3d"filter-cell" ng-class\x3d"[getFilterCellCss($column.filter(this), params.settings().filterOptions.filterLayout), $last ? \'last\' : \'\']"\x3e \x3c/div\x3e \x3c/th\x3e \x3c/tr\x3e ');$templateCache.put("ng-table/filters/number.html",'\x3cinput type\x3d"number" name\x3d"{{name}}" ng-disabled\x3d"$filterRow.disabled" ng-model\x3d"params.filter()[name]" class\x3d"input-filter form-control" placeholder\x3d"{{getFilterPlaceholderValue(filter, name)}}"/\x3e ');$templateCache.put("ng-table/filters/select-multiple.html",'\x3cselect ng-options\x3d"data.id as data.title for data in $column.data" ng-disabled\x3d"$filterRow.disabled" multiple ng-multiple\x3d"true" ng-model\x3d"params.filter()[name]" class\x3d"filter filter-select-multiple form-control" name\x3d"{{name}}"\x3e \x3c/select\x3e ');$templateCache.put("ng-table/filters/select.html",'\x3cselect ng-options\x3d"data.id as data.title for data in $selectData" ng-table-select-filter-ds\x3d"$column" ng-disabled\x3d"$filterRow.disabled" ng-model\x3d"params.filter()[name]" class\x3d"filter filter-select form-control" name\x3d"{{name}}"\x3e \x3coption style\x3d"display:none" value\x3d""\x3e\x3c/option\x3e \x3c/select\x3e ');$templateCache.put("ng-table/filters/text.html",'\x3cinput type\x3d"text" name\x3d"{{name}}" ng-disabled\x3d"$filterRow.disabled" ng-model\x3d"params.filter()[name]" class\x3d"input-filter form-control" placeholder\x3d"{{getFilterPlaceholderValue(filter, name)}}"/\x3e ');$templateCache.put("ng-table/groupRow.html",'\x3ctr ng-if\x3d"params.hasGroup()" ng-show\x3d"$groupRow.show" class\x3d"ng-table-group-header"\x3e \x3cth colspan\x3d"{{getVisibleColumns().length}}" class\x3d"sortable" ng-class\x3d"{ \'sort-asc\': params.hasGroup($selGroup, \'asc\'), \'sort-desc\':params.hasGroup($selGroup, \'desc\') }"\x3e \x3ca href\x3d"" ng-click\x3d"isSelectorOpen\x3d!isSelectorOpen" class\x3d"ng-table-group-selector"\x3e \x3cstrong class\x3d"sort-indicator"\x3e{{$selGroupTitle}}\x3c/strong\x3e \x3cbutton class\x3d"btn btn-default btn-xs ng-table-group-close" ng-click\x3d"$groupRow.show\x3dfalse; $event.preventDefault(); $event.stopPropagation();"\x3e \x3cspan class\x3d"glyphicon glyphicon-remove"\x3e\x3c/span\x3e \x3c/button\x3e \x3cbutton class\x3d"btn btn-default btn-xs ng-table-group-toggle" ng-click\x3d"toggleDetail(); $event.preventDefault(); $event.stopPropagation();"\x3e \x3cspan class\x3d"glyphicon" ng-class\x3d"{ \'glyphicon-resize-small\': params.settings().groupOptions.isExpanded, \'glyphicon-resize-full\': !params.settings().groupOptions.isExpanded }"\x3e\x3c/span\x3e \x3c/button\x3e \x3c/a\x3e \x3cdiv class\x3d"list-group" ng-if\x3d"isSelectorOpen"\x3e \x3ca href\x3d"" class\x3d"list-group-item" ng-repeat\x3d"group in getGroupables()" ng-click\x3d"groupBy(group)"\x3e \x3cstrong\x3e{{ getGroupTitle(group)}}\x3c/strong\x3e \x3cstrong ng-class\x3d"isSelectedGroup(group) \x26\x26 \'sort-indicator\'"\x3e\x3c/strong\x3e \x3c/a\x3e \x3c/div\x3e \x3c/th\x3e \x3c/tr\x3e ');$templateCache.put("ng-table/header.html","\x3cng-table-group-row\x3e\x3c/ng-table-group-row\x3e \x3cng-table-sorter-row\x3e\x3c/ng-table-sorter-row\x3e \x3cng-table-filter-row\x3e\x3c/ng-table-filter-row\x3e ");$templateCache.put("ng-table/pager.html",'\x3cdiv class\x3d"ng-cloak ng-table-pager" ng-if\x3d"params.data.length"\x3e \x3cdiv ng-if\x3d"params.settings().counts.length" class\x3d"ng-table-counts btn-group pull-right"\x3e \x3cbutton ng-repeat\x3d"count in params.settings().counts" type\x3d"button" ng-class\x3d"{\'active\':params.count()\x3d\x3dcount}" ng-click\x3d"params.count(count)" class\x3d"btn btn-default"\x3e \x3cspan ng-bind\x3d"count"\x3e\x3c/span\x3e \x3c/button\x3e \x3c/div\x3e \x3cul ng-if\x3d"pages.length" class\x3d"pagination ng-table-pagination"\x3e \x3cli ng-class\x3d"{\'disabled\': !page.active \x26\x26 !page.current, \'active\': page.current}" ng-repeat\x3d"page in pages" ng-switch\x3d"page.type"\x3e \x3ca ng-switch-when\x3d"prev" ng-click\x3d"params.page(page.number)" href\x3d"" style\x3d"background-image: url(img/left.png);height: 26px;width: 26px;border:0px;"\x3e\x3c/a\x3e \x3ca ng-switch-when\x3d"first" ng-click\x3d"params.page(page.number)" href\x3d""\x3e\x3cspan ng-bind\x3d"page.number"\x3e\x3c/span\x3e\x3c/a\x3e \x3ca ng-switch-when\x3d"page" ng-click\x3d"params.page(page.number)" href\x3d""\x3e\x3cspan ng-bind\x3d"page.number"\x3e\x3c/span\x3e\x3c/a\x3e \x3ca ng-switch-when\x3d"more" ng-click\x3d"params.page(page.number)" href\x3d""\x3e\x26#8230;\x3c/a\x3e \x3ca ng-switch-when\x3d"last" ng-click\x3d"params.page(page.number)" href\x3d""\x3e\x3cspan ng-bind\x3d"page.number"\x3e\x3c/span\x3e\x3c/a\x3e\x3ca ng-switch-when\x3d"next" ng-click\x3d"params.page(page.number)" href\x3d"" style\x3d"background-image: url(img/right.png);height: 26px;width: 26px;border:0px;"\x3e\x3c/a\x3e \x3c/li\x3e \x3c/ul\x3e \x3c/div\x3e ');$templateCache.put("ng-table/sorterRow.html",'\x3ctr class\x3d"ng-table-sort-header"\x3e \x3cth title\x3d"{{$column.headerTitle(this)}}" ng-repeat\x3d"$column in $columns" ng-class\x3d"{ \'sortable\': $column.sortable(this), \'sort-asc\': params.sorting()[$column.sortable(this)]\x3d\x3d\'asc\', \'sort-desc\': params.sorting()[$column.sortable(this)]\x3d\x3d\'desc\' }" ng-click\x3d"sortBy($column, $event)" ng-if\x3d"$column.show(this)" ng-init\x3d"template\x3d$column.headerTemplateURL(this)" class\x3d"header {{$column.class(this)}}"\x3e \x3cdiv ng-if\x3d"!template" class\x3d"ng-table-header" ng-class\x3d"{\'sort-indicator\': params.settings().sortingIndicator\x3d\x3d\'div\'}"\x3e \x3cspan ng-bind\x3d"$column.title(this)" ng-class\x3d"{\'sort-indicator\': params.settings().sortingIndicator\x3d\x3d\'span\'}"\x3e\x3c/span\x3e \x3c/div\x3e \x3cdiv ng-if\x3d"template" ng-include\x3d"template"\x3e\x3c/div\x3e \x3c/th\x3e \x3c/tr\x3e ')}]);return angular.module("ngTable")});
/*# sourceMappingURL=ng-table-business.min.js.map */